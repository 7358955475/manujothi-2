import fs from 'fs';
import path from 'path';
import pool from './src/config/database';

// Sample book content for different formats
const sampleBooks = [
  {
    title: "The Garden of Dreams",
    author: "Anonymous",
    description: "A beautiful tale about imagination and creativity",
    language: 'english',
    genre: 'Fiction',
    published_year: 2023,
    format: 'txt',
    content: `The Garden of Dreams

Chapter 1: The Beginning

In a quiet village nestled between rolling hills, there lived a young girl named Lily who possessed an extraordinary gift - the ability to bring dreams to life through her words.

Every morning, Lily would wake up before sunrise and walk to the old garden behind her cottage. It was there, surrounded by roses and lavender, that her imagination would take flight.

Today was special. Today, she would write her greatest story yet.

Chapter 2: The Magic Words

As Lily sat on her favorite wooden bench, pen in hand, she began to write:

"Once upon a time, in a garden where flowers bloomed in colors never before seen by human eyes, there lived a butterfly whose wings held the secrets of the universe..."

The words flowed from her heart onto the page, each sentence more magical than the last. She wrote about fairies who danced on moonbeams, trees that whispered ancient wisdom, and a fountain that granted one wish per year to those pure of heart.

Chapter 3: The Dream Takes Flight

As Lily wrote the final words, something extraordinary happened. The garden around her began to shimmer and change. The flowers took on new colors - blues and purples that seemed to glow from within. A small butterfly with rainbow wings landed on her page, its antennae twitching with curiosity.

Lily looked up and gasped. Her story was coming to life.

The End

This story reminds us that the power of imagination can transform the ordinary into the extraordinary, and that dreams, when written with heart, have the power to become reality.`
  },
  {
    title: "роХройро╡рпБродрпН родрпЛроЯрпНроЯроорпН",
    author: "роЕройро╛ройро┐рооро╕рпН",
    description: "роХро▒рпНрокройрпИ рооро▒рпНро▒рпБроорпН рокроЯрпИрокрпНрокро╛ро▒рпНро▒ро▓рпН рокро▒рпНро▒ро┐роп роТро░рпБ роЕро┤роХро╛рой роХродрпИ",
    language: 'tamil',
    genre: 'рокрпБродро┐ройроорпН',
    published_year: 2023,
    format: 'txt',
    content: `роХройро╡рпБродрпН родрпЛроЯрпНроЯроорпН

роЕродрпНродро┐ропро╛ропроорпН 1: родрпКроЯроХрпНроХроорпН

роорпЖройрпНроорпИропро╛рой рооро▓рпИроХро│рпБроХрпНроХрпБ роЗроЯрпИропрпЗ роЕроорпИроирпНрод роЕроорпИродро┐ропро╛рой роХро┐ро░ро╛роородрпНродро┐ро▓рпН, ро▓ро┐ро▓рпНро▓ро┐ роОройрпНро▒ роТро░рпБ роЗро│роорпН рокрпЖрогрпН ро╡ро╛ро┤рпНроирпНродро╛ро│рпН. роЕро╡ро│рпБроХрпНроХрпБ роТро░рпБ ро╡ро┐роЪрпЗро╖рооро╛рой рокро░ро┐роЪрпБ роЗро░рпБроирпНродродрпБ - ро╡ро╛ро░рпНродрпНродрпИроХро│рпН роорпВро▓роорпН роХройро╡рпБроХро│рпИ роЙропро┐ро░рпНрокрпНрокро┐рокрпНрокродро▒рпНроХро╛рой родро┐ро▒роорпИ.

роТро╡рпНро╡рпКро░рпБ роХро╛ро▓рпИропрпБроорпН, ро▓ро┐ро▓рпНро▓ро┐ роЪрпВро░ро┐роп роЙродропродрпНродро┐ро▒рпНроХрпБ роорпБройрпНрокрпЗ роОро┤рпБроирпНродрпБ, родройродрпБ роХрпБроЯро┐роЪрпИроХрпНроХрпБ рокро┐ройрпНройро╛ро▓рпН роЗро░рпБроирпНрод рокро┤рпИроп родрпЛроЯрпНроЯродрпНродро┐ро▒рпНроХрпБ роироЯроирпНродрпБ роЪрпЖро▓рпНро╡ро╛ро│рпН. ро░рпЛроЬро╛роХрпНроХро│рпН рооро▒рпНро▒рпБроорпН ро▓ро╡рогрпНроЯро░ро╛ро▓рпН роЪрпВро┤рокрпНрокроЯрпНроЯ, роЕроЩрпНроХрпБродро╛ройрпН роЕро╡ро│родрпБ роХро▒рпНрокройрпИ рокро▒роХрпНроХродрпН родрпКроЯроЩрпНроХрпБроорпН.

роЗройрпНро▒рпБ роЪро┐ро▒рокрпНрокрпБ. роЗройрпНро▒рпБ, роЕро╡ро│рпН родройродрпБ рооро┐роХрокрпНрокрпЖро░ро┐роп роХродрпИропрпИ роОро┤рпБродрпБро╡ро╛ро│рпН.

роЕродрпНродро┐ропро╛ропроорпН 2: роороирпНродро┐ро░ ро╡ро╛ро░рпНродрпНродрпИроХро│рпН

ро▓ро┐ро▓рпНро▓ро┐ родройродрпБ ро╡ро┐ро░рпБрокрпНрокрооро╛рой рооро░ роироЮрпНроЪрпИропро┐ро▓рпН роЕрооро░рпНроирпНродрпБ, рокрпЗройро╛ро╡рпИ роХрпИропро┐ро▓рпН роОроЯрпБродрпНродрпБ, роОро┤рпБродродрпН родрпКроЯроЩрпНроХро┐ройро╛ро│рпН:

"роТро░рпБ роХро╛ро▓родрпНродро┐ро▓рпН, рооройро┐род роХрогрпНроХро│ро╛ро▓рпН роЗродрпБро╡ро░рпИ роХро╛рогрокрпНрокроЯро╛род роиро┐ро▒роЩрпНроХро│ро┐ро▓рпН рооро▓ро░рпНроирпНрод рооро▓ро░рпНроХро│рпБроЯройрпН роХрпВроЯро┐роп роТро░рпБ родрпЛроЯрпНроЯродрпНродро┐ро▓рпН, роЕродройрпН роЗро▒роХрпНроХрпИроХро│ро┐ро▓рпН рокро┐ро░рокроЮрпНроЪродрпНродро┐ройрпН ро░роХроЪро┐ропроЩрпНроХро│рпН роЗро░рпБроирпНрод роТро░рпБ рокроЯрпНроЯро╛роорпНрокрпВроЪрпНроЪро┐ ро╡ро╛ро┤рпНроирпНродродрпБ..."

ро╡ро╛ро░рпНродрпНродрпИроХро│рпН роЕро╡ро│родрпБ роЗродропродрпНродро┐ро▓ро┐ро░рпБроирпНродрпБ рокроХрпНроХродрпНродро┐ро▒рпНроХрпБ рокро╛ропрпНроирпНродрой, роТро╡рпНро╡рпКро░рпБ ро╡ро╛роХрпНроХро┐ропроорпБроорпН роЕродро▒рпНроХрпБ роорпБройрпНрокрпИ ро╡ро┐роЯ роороирпНродро┐ро░рооро╛роХ роЗро░рпБроирпНродродрпБ. роиро┐ро▓ро╡рпКро│ро┐ роорпАродрпБ роироЯройрооро╛роЯро┐роп рокрпЗро░ро┐роХрпНроХро╛ро│рпНроХро│рпН, рокро┤рпИроп роЮро╛ройродрпНродрпИ рокрпБро▓роорпНрокро┐роп рооро░роЩрпНроХро│рпН, рооро▒рпНро▒рпБроорпН родрпВроп роЗродропроорпН роХрпКрогрпНроЯро╡ро░рпНроХро│рпБроХрпНроХрпБ роЖрогрпНроЯрпБроХрпНроХрпБ роТро░рпБ ро╡ро┐ро░рпБрокрпНрокродрпНродрпИ ро╡ро┤роЩрпНроХрпБроорпН роТро░рпБ роКро▒рпНро▒рпБ рокро▒рпНро▒ро┐ роЕро╡ро│рпН роОро┤рпБродро┐ройро╛ро│рпН.

роорпБроЯро┐ро╡рпБ

роЗроирпНрод роХродрпИ роОроЩрпНроХро│рпБроХрпНроХрпБ роиро┐ройрпИро╡рпВроЯрпНроЯрпБроХро┐ро▒родрпБ, роХро▒рпНрокройрпИропро┐ройрпН роЪроХрпНродро┐ роЪро╛родро╛ро░рогродрпНродрпИ ро╡ро┐роЪро┐родрпНродро┐ро░рооро╛роХ рооро╛ро▒рпНро▒рпБроорпН, рооро▒рпНро▒рпБроорпН роЗродропродрпНродрпБроЯройрпН роОро┤рпБродрокрпНрокроЯрпНроЯ роХройро╡рпБроХро│рпН ропродро╛ро░рпНродрпНродро╛роХ рооро╛ро▒рпБроорпН роЪроХрпНродро┐ роХрпКрогрпНроЯро┐ро░рпБроХрпНроХро┐ройрпНро▒рой роОройрпНрокродрпИ.`
  },
  {
    title: "рд╕рдкрдиреЛрдВ рдХрд╛ рдмрд╛рдЧ",
    author: "рдЕрдЬреНрдЮрд╛рдд",
    description: "рдХрд▓реНрдкрдирд╛ рдФрд░ рд░рдЪрдирд╛рддреНрдордХрддрд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рд╕реБрдВрджрд░ рдХрд╣рд╛рдиреА",
    language: 'hindi',
    genre: 'рдХрд╛рд▓реНрдкрдирд┐рдХ',
    published_year: 2023,
    format: 'txt',
    content: `рд╕рдкрдиреЛрдВ рдХрд╛ рдмрд╛рдЧ

рдЕрдзреНрдпрд╛рдп 1: рд╢реБрд░реБрдЖрдд

рдзреАрд░реЗ-рдзреАрд░реЗ рдврд▓рд╛рдиреЛрдВ рдХреЗ рдмреАрдЪ рд╕реНрдерд┐рдд рдПрдХ рд╢рд╛рдВрдд рдЧрд╛рдВрд╡ рдореЗрдВ, рдПрдХ рдпреБрд╡рд╛ рд▓рдбрд╝рдХреА рд▓рд┐рд▓реА рд░рд╣рддреА рдереА, рдЬрд┐рд╕рдХреЗ рдкрд╛рд╕ рдПрдХ рдЕрд╕рд╛рдзрд╛рд░рдг рдЙрдкрд╣рд╛рд░ рдерд╛ - рдЕрдкрдиреЗ рд╢рдмреНрджреЛрдВ рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рд╕рдкрдиреЛрдВ рдХреЛ рдЬреАрд╡рдВрдд рдХрд░рдиреЗ рдХреА рдХреНрд╖рдорддрд╛ред

рд╣рд░ рд╕реБрдмрд╣, рд▓рд┐рд▓реА рд╕реВрд░реНрдпреЛрджрдп рд╕реЗ рдкрд╣рд▓реЗ рдЙрдарддреА рдереА рдФрд░ рдЕрдкрдиреА рдХреЙрдЯреЗрдЬ рдХреЗ рдкреАрдЫреЗ рдкреБрд░рд╛рдиреЗ рдмрд╛рдЧ рдореЗрдВ рдЪрд▓реА рдЬрд╛рддреА рдереАред рд╡рд╣реАрдВ, рдЧреБрд▓рд╛рдм рдФрд░ рд▓реИрд╡реЗрдВрдбрд░ рд╕реЗ рдШрд┐рд░реА рд╣реБрдИ, рдЙрд╕рдХреА рдХрд▓реНрдкрдирд╛ рдЙрдбрд╝рд╛рди рднрд░рддреА рдереАред

рдЖрдЬ рдЦрд╛рд╕ рдерд╛ред рдЖрдЬ, рд╡рд╣ рдЕрдкрдиреА рд╕рдмрд╕реЗ рдмрдбрд╝реА рдХрд╣рд╛рдиреА рд▓рд┐рдЦреЗрдЧреАред

рдЕрдзреНрдпрд╛рдп 2: рдЬрд╛рджреБрдИ рд╢рдмреНрдж

рдЬреИрд╕реЗ рд╣реА рд▓рд┐рд▓реА рдЕрдкрдиреА рдкрд╕рдВрджреАрджрд╛ рд▓рдХрдбрд╝реА рдХреА рдмреЗрдВрдЪ рдкрд░ рдмреИрдареА, рдХрд▓рдо рд╣рд╛рде рдореЗрдВ рд▓реЗрдХрд░, рд▓рд┐рдЦрдирд╛ рд╢реБрд░реВ рдХрд┐рдпрд╛:

"рдПрдХ рд╕рдордп рдХреА рдмрд╛рдд рд╣реИ, рдПрдХ рдмрд╛рдЧ рдореЗрдВ рдЬрд╣рд╛рдБ рдлреВрд▓ рдЙрди рд░рдВрдЧреЛрдВ рдореЗрдВ рдЦрд┐рд▓рддреЗ рдереЗ рдЬреЛ рдорд╛рдирд╡реАрдп рдЖрдБрдЦреЛрдВ рдиреЗ рдкрд╣рд▓реЗ рдХрднреА рдирд╣реАрдВ рджреЗрдЦреЗ рдереЗ, рд╡рд╣рд╛рдБ рдПрдХ рддрд┐рддрд▓реА рд░рд╣рддреА рдереА рдЬрд┐рд╕рдХреЗ рдкрдВрдЦреЛрдВ рдореЗрдВ рдмреНрд░рд╣реНрдорд╛рдВрдб рдХреЗ рд░рд╣рд╕реНрдп рдереЗ..."

рд╢рдмреНрдж рдЙрд╕рдХреЗ рджрд┐рд▓ рд╕реЗ рдкрдиреНрдиреЗ рдкрд░ рдмрд╣рддреЗ рдереЗ, рд╣рд░ рд╡рд╛рдХреНрдп рдкрд┐рдЫрд▓реЗ рд╕реЗ рдЬрд╝реНрдпрд╛рджрд╛ рдЬрд╛рджреБрдИ рдерд╛ред рдЙрд╕рдиреЗ рдЪрд╛рдБрдж рдХреА рдХрд┐рд░рдгреЛрдВ рдкрд░ рдирд╛рдЪрдиреЗ рд╡рд╛рд▓реЗ рдкрд░рд┐рдпреЛрдВ, рдкреНрд░рд╛рдЪреАрди рдЬреНрдЮрд╛рди рдлреБрд╕рдлреБрд╕рд╛рдиреЗ рд╡рд╛рд▓реЗ рдкреЗрдбрд╝реЛрдВ, рдФрд░ рдПрдХ рдРрд╕реЗ рдлрд╡реНрд╡рд╛рд░реЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд▓рд┐рдЦрд╛ рдЬреЛ рд╕рд╛рд▓ рдореЗрдВ рдПрдХ рдмрд╛рд░ рдЙрди рд▓реЛрдЧреЛрдВ рдХреЛ рдПрдХ рдЗрдЪреНрдЫрд╛ рджреЗрддрд╛ рдерд╛ рдЬрд┐рдирдХрд╛ рджрд┐рд▓ рд╕рд╛рдл рдерд╛ред

рдирд┐рд╖реНрдХрд░реНрд╖

рдпрд╣ рдХрд╣рд╛рдиреА рд╣рдореЗрдВ рдпрд╛рдж рджрд┐рд▓рд╛рддреА рд╣реИ рдХрд┐ рдХрд▓реНрдкрдирд╛ рдХреА рд╢рдХреНрддрд┐ рд╕рд╛рдзрд╛рд░рдг рдХреЛ рдЕрд╕рд╛рдзрд╛рд░рдг рдореЗрдВ рдмрджрд▓ рд╕рдХрддреА рд╣реИ, рдФрд░ рдХрд┐ рд╕рдкрдиреЗ, рдЬрдм рджрд┐рд▓ рд╕реЗ рд▓рд┐рдЦреЗ рдЬрд╛рддреЗ рд╣реИрдВ, рддреЛ рд╡рд╛рд╕реНрддрд╡рд┐рдХрддрд╛ рдмрдирдиреЗ рдХреА рд╢рдХреНрддрд┐ рд░рдЦрддреЗ рд╣реИрдВред`
  }
];

async function createSampleBooks() {
  try {
    console.log('ЁЯФД Creating sample books in different formats...');

    // Get a valid user ID (admin user)
    const userResult = await pool.query('SELECT id FROM users WHERE email = $1', ['admin@ogon.com']);
    const adminUserId = userResult.rows[0]?.id;

    if (!adminUserId) {
      throw new Error('Admin user not found');
    }

    for (const book of sampleBooks) {
      const fileName = `${book.title.replace(/\s+/g, '-').toLowerCase()}-${Date.now()}.${book.format}`;
      const filePath = path.join(__dirname, 'public', 'books', fileName);

      // Ensure books directory exists
      const booksDir = path.join(__dirname, 'public', 'books');
      if (!fs.existsSync(booksDir)) {
        fs.mkdirSync(booksDir, { recursive: true });
      }

      // Write the book file
      fs.writeFileSync(filePath, book.content, 'utf8');

      // Insert into database
      const result = await pool.query(
        `INSERT INTO books (
          title, author, description, cover_image_url, pdf_url,
          language, genre, published_year, created_by
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
        RETURNING *`,
        [
          book.title,
          book.author,
          book.description,
          `https://images.pexels.com/photos/3184418/pexels-photo-3184418.jpeg?auto=compress&cs=tinysrgb&w=300&h=400&fit=crop`,
          `/books/${fileName}`,
          book.language,
          book.genre,
          book.published_year,
          adminUserId
        ]
      );

      console.log(`тЬЕ Created "${book.title}" (${book.format.toUpperCase()}) - ID: ${result.rows[0].id}`);
    }

    console.log('ЁЯОЙ All sample books created successfully!');

  } catch (error) {
    console.error('тЭМ Error creating sample books:', error);
  } finally {
    await pool.end();
  }
}

createSampleBooks();